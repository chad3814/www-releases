
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>lld 19.1.0 Release Notes &#8212; lld 19.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/llvm.css?v=1cf7c864" />
    <script src="_static/documentation_options.js?v=39b91ecf"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Large data sections" href="ELF/large_sections.html" />
    <link rel="prev" title="Partitions" href="Partitions.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
<a href="index.html"><img src="_static/logo.png" alt="LLVM Documentation"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ELF/large_sections.html" title="Large data sections"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             accesskey="P">previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>

        <li class="nav-item nav-item-this"><a href="">lld 19.1.0 Release Notes</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">lld 19.1.0 Release Notes</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release">Non-comprehensive list of changes in this release</a><ul>
<li><a class="reference internal" href="#elf-improvements">ELF Improvements</a></li>
<li><a class="reference internal" href="#breaking-changes">Breaking changes</a></li>
<li><a class="reference internal" href="#coff-improvements">COFF Improvements</a></li>
<li><a class="reference internal" href="#mingw-improvements">MinGW Improvements</a></li>
<li><a class="reference internal" href="#macho-improvements">MachO Improvements</a></li>
<li><a class="reference internal" href="#webassembly-improvements">WebAssembly Improvements</a><ul>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Partitions.html"
                          title="previous chapter">Partitions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ELF/large_sections.html"
                          title="next chapter">Large data sections</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ReleaseNotes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="lld-release-release-notes">
<h1>lld 19.1.0 Release Notes<a class="headerlink" href="#lld-release-release-notes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id25">Introduction</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id26">Non-comprehensive list of changes in this release</a></p>
<ul>
<li><p><a class="reference internal" href="#elf-improvements" id="id27">ELF Improvements</a></p></li>
<li><p><a class="reference internal" href="#breaking-changes" id="id28">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#coff-improvements" id="id29">COFF Improvements</a></p></li>
<li><p><a class="reference internal" href="#mingw-improvements" id="id30">MinGW Improvements</a></p></li>
<li><p><a class="reference internal" href="#macho-improvements" id="id31">MachO Improvements</a></p></li>
<li><p><a class="reference internal" href="#webassembly-improvements" id="id32">WebAssembly Improvements</a></p>
<ul>
<li><p><a class="reference internal" href="#fixes" id="id33">Fixes</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the lld linker, release 19.1.0.
Here we describe the status of lld, including major improvements
from the previous release. All lld releases may be downloaded
from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Link to this heading">¶</a></h2>
<section id="elf-improvements">
<h3><a class="toc-backref" href="#id27" role="doc-backlink">ELF Improvements</a><a class="headerlink" href="#elf-improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Experimental CREL relocations with explicit addends are now supported using the
temporary section type code 0x40000020 (<code class="docutils literal notranslate"><span class="pre">clang</span> <span class="pre">-c</span> <span class="pre">-Wa,--crel,--allow-experimental-crel</span></code>).
LLVM will change the code and break compatibility (Clang and lld of different
versions are not guaranteed to cooperate, unlike other features). CREL with
implicit addends are not supported.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/98115">#98115</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EI_OSABI</span></code> in the output is now inferred from input object files.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/97144">#97144</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--compress-sections</span> <span class="pre">&lt;section-glib&gt;={none,zlib,zstd}[:level]</span></code> is added to compress
matched output sections without the <code class="docutils literal notranslate"><span class="pre">SHF_ALLOC</span></code> flag.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/84855">#84855</a>)
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/90567">#90567</a>)</p></li>
<li><p>The default compression level for zlib is now independent of linker
optimization level (<code class="docutils literal notranslate"><span class="pre">Z_BEST_SPEED</span></code>).</p></li>
<li><p>zstd compression parallelism no longer requires <code class="docutils literal notranslate"><span class="pre">ZSTD_MULITHREAD</span></code> build.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GNU_PROPERTY_AARCH64_FEATURE_PAUTH</span></code> notes, <code class="docutils literal notranslate"><span class="pre">R_AARCH64_AUTH_ABS64</span></code> and
<code class="docutils literal notranslate"><span class="pre">R_AARCH64_AUTH_RELATIVE</span></code> relocations are now supported.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/72714">#72714</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--no-allow-shlib-undefined</span></code> now rejects non-exported definitions in the
<code class="docutils literal notranslate"><span class="pre">def-hidden.so</span> <span class="pre">ref.so</span></code> case.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/86777">#86777</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--debug-names</span></code> is added to create a merged <code class="docutils literal notranslate"><span class="pre">.debug_names</span></code> index
from input <code class="docutils literal notranslate"><span class="pre">.debug_names</span></code> sections. Type units are not handled yet.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/86508">#86508</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--enable-non-contiguous-regions</span></code> option allows automatically packing input
sections into memory regions by automatically spilling to later matches if a
region would overflow. This reduces the toil of manually packing regions
(typical for embedded). It also makes full LTO feasible in such cases, since
IR merging currently prevents the linker script from referring to input
files. (<a class="reference external" href="https://github.com/llvm/llvm-project/pull/90007">#90007</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--default-script`/</span></code>-dT`` is implemented to specify a default script that is processed
if <code class="docutils literal notranslate"><span class="pre">--script</span></code>/<code class="docutils literal notranslate"><span class="pre">-T</span></code> is not specified.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/89327">#89327</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--force-group-allocation</span></code> is implemented to discard <code class="docutils literal notranslate"><span class="pre">SHT_GROUP</span></code> sections
and combine relocation sections if their relocated section group members are
placed to the same output section.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/94704">#94704</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--build-id</span></code> now defaults to generating a 20-byte digest (“sha1”) instead
of 8-byte (“fast”). This improves compatibility with RPM packaging tools.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/93943">#93943</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">lrodata-after-bss</span></code> is implemented to place <code class="docutils literal notranslate"><span class="pre">.lrodata</span></code> after <code class="docutils literal notranslate"><span class="pre">.bss</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/81224">#81224</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--export-dynamic</span></code> no longer creates dynamic sections for <code class="docutils literal notranslate"><span class="pre">-no-pie</span></code> static linking.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--lto-emit-asm</span></code> is now added as the canonical spelling of <code class="docutils literal notranslate"><span class="pre">--plugin-opt=emit-llvm</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--lto-emit-llvm</span></code> now uses the pre-codegen module.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/97480">#97480</a>)</p></li>
<li><p>When AArch64 PAuth is enabled, <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">pack-relative-relocs</span></code> now encodes <code class="docutils literal notranslate"><span class="pre">R_AARCH64_AUTH_RELATIVE</span></code> relocations in <code class="docutils literal notranslate"><span class="pre">.rela.auth.dyn</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/96496">#96496</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">gcs</span></code> and <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">gcs-report</span></code> are now supported for AArch64 Guarded Control Stack extension.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-r</span></code> now forces <code class="docutils literal notranslate"><span class="pre">-Bstatic</span></code>.</p></li>
<li><p>Thumb2 PLT is now supported for Cortex-M processors.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/93644">#93644</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DW_EH_sdata4</span></code> of addresses larger than 0x80000000 is now supported for MIPS32.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/92438">#92438</a>)</p></li>
<li><p>Certain unknown section types are rejected.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/85173">#85173</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PROVIDE(lhs</span> <span class="pre">=</span> <span class="pre">rhs)</span> <span class="pre">PROVIDE(rhs</span> <span class="pre">=</span> <span class="pre">...)</span></code>, <code class="docutils literal notranslate"><span class="pre">lhs</span></code> is now defined only if <code class="docutils literal notranslate"><span class="pre">rhs</span></code> is needed.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/74771">#74771</a>)
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/87530">#87530</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OUTPUT_FORMAT(binary)</span></code> is now supported.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/98837">#98837</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NOCROSSREFS</span></code> and <code class="docutils literal notranslate"><span class="pre">NOCRFOSSREFS_TO</span></code> commands now supported to prohibit
cross references between certain output sections.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/98773">#98773</a>)</p></li>
<li><p>Orphan placement is refined to prefer the last similar section when its rank &lt;= orphan’s rank.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/94099">#94099</a>)
Non-alloc orphan sections are now placed at the end.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/94519">#94519</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R_X86_64_REX_GOTPCRELX</span></code> of the addq form is no longer incorrectly optimized when the address is larger than 0x80000000.</p></li>
</ul>
</section>
<section id="breaking-changes">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">Breaking changes</a><a class="headerlink" href="#breaking-changes" title="Link to this heading">¶</a></h3>
</section>
<section id="coff-improvements">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">COFF Improvements</a><a class="headerlink" href="#coff-improvements" title="Link to this heading">¶</a></h3>
</section>
<section id="mingw-improvements">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">MinGW Improvements</a><a class="headerlink" href="#mingw-improvements" title="Link to this heading">¶</a></h3>
</section>
<section id="macho-improvements">
<h3><a class="toc-backref" href="#id31" role="doc-backlink">MachO Improvements</a><a class="headerlink" href="#macho-improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Chained fixups are now enabled by default when targeting macOS 13.0,
iOS 13.4, tvOS 14.0, watchOS 7.0, and visionOS 1.0 or later.
They can be disabled with the <cite>-no_fixup_chains</cite> flag.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/99255">#99255</a>)</p></li>
</ul>
</section>
<section id="webassembly-improvements">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">WebAssembly Improvements</a><a class="headerlink" href="#webassembly-improvements" title="Link to this heading">¶</a></h3>
<section id="fixes">
<h4><a class="toc-backref" href="#id33" role="doc-backlink">Fixes</a><a class="headerlink" href="#fixes" title="Link to this heading">¶</a></h4>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ELF/large_sections.html" title="Large data sections"
             >next</a> |</li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             >previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>

        <li class="nav-item nav-item-this"><a href="">lld 19.1.0 Release Notes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2011-2024, LLVM Project.
      Last updated on 2024-09-17.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>