
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Building libc++ &#8212; libc++ 7.0 documentation</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Testing libc++" href="TestingLibcxx.html" />
    <link rel="prev" title="Using libc++" href="UsingLibcxx.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>libc++ 7.0 documentation</span></a></h1>
        <h2 class="heading"><span>Building libc++</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="UsingLibcxx.html">Using libc++</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="TestingLibcxx.html">Testing libc++</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="building-libc">
<span id="buildinglibcxx"></span><h1>Building libc++<a class="headerlink" href="#building-libc" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#getting-started" id="id3">Getting Started</a></p>
<ul>
<li><p><a class="reference internal" href="#experimental-support-for-windows" id="id4">Experimental Support for Windows</a></p>
<ul>
<li><p><a class="reference internal" href="#cmake-visual-studio" id="id5">CMake + Visual Studio</a></p></li>
<li><p><a class="reference internal" href="#cmake-ninja" id="id6">CMake + ninja</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#cmake-options" id="id7">CMake Options</a></p>
<ul>
<li><p><a class="reference internal" href="#libc-specific-options" id="id8">libc++ specific options</a></p></li>
<li><p><a class="reference internal" href="#libc-experimental-specific-options" id="id9">libc++experimental Specific Options</a></p></li>
<li><p><a class="reference internal" href="#abi-library-specific-options" id="id10">ABI Library Specific Options</a></p></li>
<li><p><a class="reference internal" href="#libc-feature-options" id="id11">libc++ Feature Options</a></p></li>
<li><p><a class="reference internal" href="#libc-abi-feature-options" id="id12">libc++ ABI Feature Options</a></p></li>
<li><p><a class="reference internal" href="#llvm-specific-options" id="id13">LLVM-specific options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-alternate-abi-libraries" id="id14">Using Alternate ABI libraries</a></p>
<ul>
<li><p><a class="reference internal" href="#using-libsupc-on-linux" id="id15">Using libsupc++ on Linux</a></p></li>
<li><p><a class="reference internal" href="#using-libcxxrt-on-linux" id="id16">Using libcxxrt on Linux</a></p></li>
<li><p><a class="reference internal" href="#using-a-local-abi-library-installation" id="id17">Using a local ABI library installation</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="getting-started">
<span id="build-instructions"></span><h2><a class="toc-backref" href="#id3">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>On Mac OS 10.7 (Lion) and later, the easiest way to get this library is to install
Xcode 4.2 or later.  However if you want to install tip-of-trunk from here
(getting the bleeding edge), read on.</p>
<p>The basic steps needed to build libc++ are:</p>
<ol class="arabic">
<li><p>Checkout LLVM:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">where-you-want-llvm-to-live</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">svn</span> <span class="pre">co</span> <span class="pre">http://llvm.org/svn/llvm-project/llvm/trunk</span> <span class="pre">llvm</span></code></p></li>
</ul>
</li>
<li><p>Checkout libc++:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">where-you-want-llvm-to-live</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">llvm/projects</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">svn</span> <span class="pre">co</span> <span class="pre">http://llvm.org/svn/llvm-project/libcxx/trunk</span> <span class="pre">libcxx</span></code></p></li>
</ul>
</li>
<li><p>Checkout libc++abi:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">where-you-want-llvm-to-live</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">llvm/projects</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">svn</span> <span class="pre">co</span> <span class="pre">http://llvm.org/svn/llvm-project/libcxxabi/trunk</span> <span class="pre">libcxxabi</span></code></p></li>
</ul>
</li>
<li><p>Configure and build libc++ with libc++abi:</p>
<p>CMake is the only supported configuration system.</p>
<p>Clang is the preferred compiler when building and using libc++.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">where</span> <span class="pre">you</span> <span class="pre">want</span> <span class="pre">to</span> <span class="pre">build</span> <span class="pre">llvm</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">build</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">build</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">-G</span> <span class="pre">&lt;generator&gt;</span> <span class="pre">[options]</span> <span class="pre">&lt;path</span> <span class="pre">to</span> <span class="pre">llvm</span> <span class="pre">sources&gt;</span></code></p></li>
</ul>
<p>For more information about configuring libc++ see <a class="reference internal" href="#cmake-options"><span class="std std-ref">CMake Options</span></a>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">cxx</span></code> — will build libc++ and libc++abi.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check-cxx</span> <span class="pre">check-cxxabi</span></code> — will run the test suites.</p></li>
</ul>
<p>Shared libraries for libc++ and libc++ abi should now be present in llvm/build/lib.
See <a class="reference internal" href="UsingLibcxx.html#alternate-libcxx"><span class="std std-ref">using an alternate libc++ installation</span></a></p>
</li>
<li><p><strong>Optional</strong>: Install libc++ and libc++abi</p>
<p>If your system already provides a libc++ installation it is important to be
careful not to replace it. Remember Use the CMake option <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code> to
select a safe place to install libc++.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install-cxx</span> <span class="pre">install-cxxabi</span></code> — Will install the libraries and the headers</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>Replacing your systems libc++ installation could render the system non-functional.</p></li>
<li><p>Mac OS X will not boot without a valid copy of <code class="docutils literal notranslate"><span class="pre">libc++.1.dylib</span></code> in <code class="docutils literal notranslate"><span class="pre">/usr/lib</span></code>.</p></li>
</ul>
</div>
</li>
</ol>
<p>The instructions are for building libc++ on
FreeBSD, Linux, or Mac using <a class="reference external" href="http://libcxxabi.llvm.org/">libc++abi</a> as the C++ ABI library.
On Linux, it is also possible to use <a class="reference internal" href="#libsupcxx"><span class="std std-ref">libsupc++</span></a> or libcxxrt.</p>
<p>It is sometimes beneficial to build outside of the LLVM tree. An out-of-tree
build would look like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> where-you-want-libcxx-to-live
$ <span class="c1"># Check out llvm, libc++ and libc++abi.</span>
$ <span class="sb">``</span>svn co http://llvm.org/svn/llvm-project/llvm/trunk llvm<span class="sb">``</span>
$ <span class="sb">``</span>svn co http://llvm.org/svn/llvm-project/libcxx/trunk libcxx<span class="sb">``</span>
$ <span class="sb">``</span>svn co http://llvm.org/svn/llvm-project/libcxxabi/trunk libcxxabi<span class="sb">``</span>
$ <span class="nb">cd</span> where-you-want-to-build
$ mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
$ <span class="nb">export</span> <span class="nv">CC</span><span class="o">=</span>clang <span class="nv">CXX</span><span class="o">=</span>clang++
$ cmake -DLLVM_PATH<span class="o">=</span>path/to/llvm <span class="se">\</span>
        -DLIBCXX_CXX_ABI<span class="o">=</span>libcxxabi <span class="se">\</span>
        -DLIBCXX_CXX_ABI_INCLUDE_PATHS<span class="o">=</span>path/to/libcxxabi/include <span class="se">\</span>
        path/to/libcxx
$ make
$ make check-libcxx <span class="c1"># optional</span>
</pre></div>
</div>
<div class="section" id="experimental-support-for-windows">
<h3><a class="toc-backref" href="#id4">Experimental Support for Windows</a><a class="headerlink" href="#experimental-support-for-windows" title="Permalink to this headline">¶</a></h3>
<p>The Windows support requires building with clang-cl as cl does not support one
required extension: <cite>#include_next</cite>.  Furthermore, VS 2015 or newer (19.00) is
required.  In the case of clang-cl, we need to specify the “MS Compatibility
Version” as it defaults to 2014 (18.00).</p>
<div class="section" id="cmake-visual-studio">
<h4><a class="toc-backref" href="#id5">CMake + Visual Studio</a><a class="headerlink" href="#cmake-visual-studio" title="Permalink to this headline">¶</a></h4>
<p>Building with Visual Studio currently does not permit running tests. However,
it is the simplest way to build.</p>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> cmake -G <span class="s2">&quot;Visual Studio 14 2015&quot;</span>              <span class="se">^</span>
<span class="se"> </span>       -T <span class="s2">&quot;LLVM-vs2014&quot;</span>                        <span class="se">^</span>
<span class="se"> </span>       -DLIBCXX_ENABLE_SHARED=YES              <span class="se">^</span>
<span class="se"> </span>       -DLIBCXX_ENABLE_STATIC=NO               <span class="se">^</span>
<span class="se"> </span>       -DLIBCXX_ENABLE_EXPERIMENTAL_LIBRARY=NO <span class="se">^</span>
<span class="se"> </span>       \path\to\libcxx
<span class="p">&gt;</span> cmake --build .
</pre></div>
</div>
</div>
<div class="section" id="cmake-ninja">
<h4><a class="toc-backref" href="#id6">CMake + ninja</a><a class="headerlink" href="#cmake-ninja" title="Permalink to this headline">¶</a></h4>
<p>Building with ninja is required for development to enable tests.
Unfortunately, doing so requires additional configuration as we cannot
just specify a toolset.</p>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> cmake -G Ninja                                                                    <span class="se">^</span>
<span class="se"> </span>       -DCMAKE_MAKE_PROGRAM=/path/to/ninja                                         <span class="se">^</span>
<span class="se"> </span>       -DCMAKE_SYSTEM_NAME=Windows                                                 <span class="se">^</span>
<span class="se"> </span>       -DCMAKE_C_COMPILER=clang-cl                                                 <span class="se">^</span>
<span class="se"> </span>       -DCMAKE_C_FLAGS=<span class="s2">&quot;-fms-compatibility-version=19.00 --target=i686--windows&quot;</span>   <span class="se">^</span>
<span class="se"> </span>       -DCMAKE_CXX_COMPILER=clang-cl                                                <span class="se">^</span>
<span class="se"> </span>       -DCMAKE_CXX_FLAGS=<span class="s2">&quot;-fms-compatibility-version=19.00 --target=i686--windows&quot;</span> <span class="se">^</span>
<span class="se"> </span>       -DLLVM_PATH=/path/to/llvm/tree                                              <span class="se">^</span>
<span class="se"> </span>       -DLIBCXX_ENABLE_SHARED=YES                                                  <span class="se">^</span>
<span class="se"> </span>       -DLIBCXX_ENABLE_STATIC=NO                                                   <span class="se">^</span>
<span class="se"> </span>       -DLIBCXX_ENABLE_EXPERIMENTAL_LIBRARY=NO                                     <span class="se">^</span>
<span class="se"> </span>       \path\to\libcxx
<span class="p">&gt;</span> /path/to/ninja cxx
<span class="p">&gt;</span> /path/to/ninja check-cxx
</pre></div>
</div>
<p>Note that the paths specified with backward slashes must use the <cite>\</cite> as the
directory separator as clang-cl may otherwise parse the path as an argument.</p>
</div>
</div>
</div>
<div class="section" id="cmake-options">
<span id="id1"></span><h2><a class="toc-backref" href="#id7">CMake Options</a><a class="headerlink" href="#cmake-options" title="Permalink to this headline">¶</a></h2>
<p>Here are some of the CMake variables that are used often, along with a
brief explanation and LLVM-specific notes. For full documentation, check the
CMake docs or execute <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--help-variable</span> <span class="pre">VARIABLE_NAME</span></code>.</p>
<dl class="simple">
<dt><strong>CMAKE_BUILD_TYPE</strong>:STRING</dt><dd><p>Sets the build type for <code class="docutils literal notranslate"><span class="pre">make</span></code> based generators. Possible values are
Release, Debug, RelWithDebInfo and MinSizeRel. On systems like Visual Studio
the user sets the build type with the IDE settings.</p>
</dd>
<dt><strong>CMAKE_INSTALL_PREFIX</strong>:PATH</dt><dd><p>Path where LLVM will be installed if “make install” is invoked or the
“INSTALL” target is built.</p>
</dd>
<dt><strong>CMAKE_CXX_COMPILER</strong>:STRING</dt><dd><p>The C++ compiler to use when building and testing libc++.</p>
</dd>
</dl>
<div class="section" id="libc-specific-options">
<span id="libcxx-specific-options"></span><h3><a class="toc-backref" href="#id8">libc++ specific options</a><a class="headerlink" href="#libc-specific-options" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-arg-libcxx-install-library-bool">
<code class="sig-name descname">LIBCXX_INSTALL_LIBRARY:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-install-library-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Toggle the installation of the library portion of libc++.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-install-headers-bool">
<code class="sig-name descname">LIBCXX_INSTALL_HEADERS:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-install-headers-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Toggle the installation of the libc++ headers.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-enable-assertions-bool">
<code class="sig-name descname">LIBCXX_ENABLE_ASSERTIONS:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-enable-assertions-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Build libc++ with assertions enabled.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-build-32-bits-bool">
<code class="sig-name descname">LIBCXX_BUILD_32_BITS:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-build-32-bits-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">OFF</span></code></p>
<p>Build libc++ as a 32 bit library. Also see <cite>LLVM_BUILD_32_BITS</cite>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-enable-shared-bool">
<code class="sig-name descname">LIBCXX_ENABLE_SHARED:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-enable-shared-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Build libc++ as a shared library. Either <cite>LIBCXX_ENABLE_SHARED</cite> or
<cite>LIBCXX_ENABLE_STATIC</cite> has to be enabled.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-enable-static-bool">
<code class="sig-name descname">LIBCXX_ENABLE_STATIC:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-enable-static-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Build libc++ as a static library. Either <cite>LIBCXX_ENABLE_SHARED</cite> or
<cite>LIBCXX_ENABLE_STATIC</cite> has to be enabled.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-libdir-suffix-string">
<code class="sig-name descname">LIBCXX_LIBDIR_SUFFIX:STRING</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-libdir-suffix-string" title="Permalink to this definition">¶</a></dt>
<dd><p>Extra suffix to append to the directory where libraries are to be installed.
This option overrides <cite>LLVM_LIBDIR_SUFFIX</cite>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-install-prefix-string">
<code class="sig-name descname">LIBCXX_INSTALL_PREFIX:STRING</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-install-prefix-string" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></p>
<p>Define libc++ destination prefix.</p>
</dd></dl>

</div>
<div class="section" id="libc-experimental-specific-options">
<span id="libc-experimental-options"></span><h3><a class="toc-backref" href="#id9">libc++experimental Specific Options</a><a class="headerlink" href="#libc-experimental-specific-options" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-arg-libcxx-enable-experimental-library-bool">
<code class="sig-name descname">LIBCXX_ENABLE_EXPERIMENTAL_LIBRARY:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-enable-experimental-library-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Build and test libc++experimental.a.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-install-experimental-library-bool">
<code class="sig-name descname">LIBCXX_INSTALL_EXPERIMENTAL_LIBRARY:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-install-experimental-library-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">LIBCXX_ENABLE_EXPERIMENTAL_LIBRARY</span> <span class="pre">AND</span> <span class="pre">LIBCXX_INSTALL_LIBRARY</span></code></p>
<p>Install libc++experimental.a alongside libc++.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-enable-filesystem-bool">
<code class="sig-name descname">LIBCXX_ENABLE_FILESYSTEM:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-enable-filesystem-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Build filesystem as a standalone library libc++fs.a.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-install-filesystem-library-bool">
<code class="sig-name descname">LIBCXX_INSTALL_FILESYSTEM_LIBRARY:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-install-filesystem-library-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">LIBCXX_ENABLE_FILESYSTEM</span> <span class="pre">AND</span> <span class="pre">LIBCXX_INSTALL_LIBRARY</span></code></p>
<p>Install libc++fs.a alongside libc++.</p>
</dd></dl>

</div>
<div class="section" id="abi-library-specific-options">
<span id="id2"></span><h3><a class="toc-backref" href="#id10">ABI Library Specific Options</a><a class="headerlink" href="#abi-library-specific-options" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-arg-libcxx-cxx-abi-string">
<code class="sig-name descname">LIBCXX_CXX_ABI:STRING</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-cxx-abi-string" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Values</strong>: <code class="docutils literal notranslate"><span class="pre">none</span></code>, <code class="docutils literal notranslate"><span class="pre">libcxxabi</span></code>, <code class="docutils literal notranslate"><span class="pre">libcxxrt</span></code>, <code class="docutils literal notranslate"><span class="pre">libstdc++</span></code>, <code class="docutils literal notranslate"><span class="pre">libsupc++</span></code>.</p>
<p>Select the ABI library to build libc++ against.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-cxx-abi-include-paths-paths">
<code class="sig-name descname">LIBCXX_CXX_ABI_INCLUDE_PATHS:PATHS</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-cxx-abi-include-paths-paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide additional search paths for the ABI library headers.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-cxx-abi-library-path-path">
<code class="sig-name descname">LIBCXX_CXX_ABI_LIBRARY_PATH:PATH</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-cxx-abi-library-path-path" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the path to the ABI library that libc++ should link against.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-enable-static-abi-library-bool">
<code class="sig-name descname">LIBCXX_ENABLE_STATIC_ABI_LIBRARY:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-enable-static-abi-library-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">OFF</span></code></p>
<p>If this option is enabled, libc++ will try and link the selected ABI library
statically.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-enable-abi-linker-script-bool">
<code class="sig-name descname">LIBCXX_ENABLE_ABI_LINKER_SCRIPT:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-enable-abi-linker-script-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code> by default on UNIX platforms other than Apple unless
‘LIBCXX_ENABLE_STATIC_ABI_LIBRARY’ is ON. Otherwise the default value is <code class="docutils literal notranslate"><span class="pre">OFF</span></code>.</p>
<p>This option generate and installs a linker script as <code class="docutils literal notranslate"><span class="pre">libc++.so</span></code> which
links the correct ABI library.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxxabi-use-llvm-unwinder-bool">
<code class="sig-name descname">LIBCXXABI_USE_LLVM_UNWINDER:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxxabi-use-llvm-unwinder-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">OFF</span></code></p>
<p>Build and use the LLVM unwinder. Note: This option can only be used when
libc++abi is the C++ ABI library used.</p>
</dd></dl>

</div>
<div class="section" id="libc-feature-options">
<h3><a class="toc-backref" href="#id11">libc++ Feature Options</a><a class="headerlink" href="#libc-feature-options" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-arg-libcxx-enable-exceptions-bool">
<code class="sig-name descname">LIBCXX_ENABLE_EXCEPTIONS:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-enable-exceptions-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Build libc++ with exception support.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-enable-rtti-bool">
<code class="sig-name descname">LIBCXX_ENABLE_RTTI:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-enable-rtti-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Build libc++ with run time type information.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-include-benchmarks-bool">
<code class="sig-name descname">LIBCXX_INCLUDE_BENCHMARKS:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-include-benchmarks-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">ON</span></code></p>
<p>Build the libc++ benchmark tests and the Google Benchmark library needed
to support them.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-benchmark-native-stdlib-string">
<code class="sig-name descname">LIBCXX_BENCHMARK_NATIVE_STDLIB:STRING</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-benchmark-native-stdlib-string" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>:: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></p>
<p><strong>Values</strong>:: <code class="docutils literal notranslate"><span class="pre">libc++</span></code>, <code class="docutils literal notranslate"><span class="pre">libstdc++</span></code></p>
<p>Build the libc++ benchmark tests and Google Benchmark library against the
specified standard library on the platform. On linux this can be used to
compare libc++ to libstdc++ by building the benchmark tests against both
standard libraries.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-benchmark-native-gcc-toolchain-string">
<code class="sig-name descname">LIBCXX_BENCHMARK_NATIVE_GCC_TOOLCHAIN:STRING</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-benchmark-native-gcc-toolchain-string" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the specified GCC toolchain and standard library when building the native
stdlib benchmark tests.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-hide-from-abi-per-tu-by-default-bool">
<code class="sig-name descname">LIBCXX_HIDE_FROM_ABI_PER_TU_BY_DEFAULT:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-hide-from-abi-per-tu-by-default-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">OFF</span></code></p>
<p>Pick the default for whether to constrain ABI-unstable symbols to
each individual translation unit. This setting controls whether
<cite>_LIBCPP_HIDE_FROM_ABI_PER_TU_BY_DEFAULT</cite> is defined by default –
see the documentation of that macro for details.</p>
</dd></dl>

</div>
<div class="section" id="libc-abi-feature-options">
<h3><a class="toc-backref" href="#id12">libc++ ABI Feature Options</a><a class="headerlink" href="#libc-abi-feature-options" title="Permalink to this headline">¶</a></h3>
<p>The following options allow building libc++ for a different ABI version.</p>
<dl class="option">
<dt id="cmdoption-arg-libcxx-abi-version-string">
<code class="sig-name descname">LIBCXX_ABI_VERSION:STRING</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-abi-version-string" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">1</span></code></p>
<p>Defines the target ABI version of libc++.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-abi-unstable-bool">
<code class="sig-name descname">LIBCXX_ABI_UNSTABLE:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-abi-unstable-bool" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">OFF</span></code></p>
<p>Build the “unstable” ABI version of libc++. Includes all ABI changing features
on top of the current stable version.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-libcxx-abi-defines-string">
<code class="sig-name descname">LIBCXX_ABI_DEFINES:STRING</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-libcxx-abi-defines-string" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Default</strong>: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></p>
<p>A semicolon-separated list of ABI macros to persist in the site config header.
See <code class="docutils literal notranslate"><span class="pre">include/__config</span></code> for the list of ABI macros.</p>
</dd></dl>

</div>
<div class="section" id="llvm-specific-options">
<span id="llvm-specific-variables"></span><h3><a class="toc-backref" href="#id13">LLVM-specific options</a><a class="headerlink" href="#llvm-specific-options" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-arg-llvm-libdir-suffix-string">
<code class="sig-name descname">LLVM_LIBDIR_SUFFIX:STRING</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-llvm-libdir-suffix-string" title="Permalink to this definition">¶</a></dt>
<dd><p>Extra suffix to append to the directory where libraries are to be
installed. On a 64-bit architecture, one could use <code class="docutils literal notranslate"><span class="pre">-DLLVM_LIBDIR_SUFFIX=64</span></code>
to install libraries to <code class="docutils literal notranslate"><span class="pre">/usr/lib64</span></code>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-llvm-build-32-bits-bool">
<code class="sig-name descname">LLVM_BUILD_32_BITS:BOOL</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-llvm-build-32-bits-bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Build 32-bits executables and libraries on 64-bits systems. This option is
available only on some 64-bits unix systems. Defaults to OFF.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-arg-llvm-lit-args-string">
<code class="sig-name descname">LLVM_LIT_ARGS:STRING</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-arg-llvm-lit-args-string" title="Permalink to this definition">¶</a></dt>
<dd><p>Arguments given to lit.  <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clang-test</span></code> are affected.
By default, <code class="docutils literal notranslate"><span class="pre">'-sv</span> <span class="pre">--no-progress-bar'</span></code> on Visual C++ and Xcode, <code class="docutils literal notranslate"><span class="pre">'-sv'</span></code> on
others.</p>
</dd></dl>

</div>
</div>
<div class="section" id="using-alternate-abi-libraries">
<h2><a class="toc-backref" href="#id14">Using Alternate ABI libraries</a><a class="headerlink" href="#using-alternate-abi-libraries" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-libsupc-on-linux">
<span id="libsupcxx"></span><h3><a class="toc-backref" href="#id15">Using libsupc++ on Linux</a><a class="headerlink" href="#using-libsupc-on-linux" title="Permalink to this headline">¶</a></h3>
<p>You will need libstdc++ in order to provide libsupc++.</p>
<p>Figure out where the libsupc++ headers are on your system. On Ubuntu this
is <code class="docutils literal notranslate"><span class="pre">/usr/include/c++/&lt;version&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">/usr/include/c++/&lt;version&gt;/&lt;target-triple&gt;</span></code></p>
<p>You can also figure this out by running</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">echo</span> <span class="p">|</span> g++ -Wp,-v -x c++ - -fsyntax-only
ignoring nonexistent directory <span class="s2">&quot;/usr/local/include/x86_64-linux-gnu&quot;</span>
ignoring nonexistent directory <span class="s2">&quot;/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../x86_64-linux-gnu/include&quot;</span>
<span class="c1">#include &quot;...&quot; search starts here:</span>
<span class="c1">#include &amp;lt;...&amp;gt; search starts here:</span>
/usr/include/c++/4.7
/usr/include/c++/4.7/x86_64-linux-gnu
/usr/include/c++/4.7/backward
/usr/lib/gcc/x86_64-linux-gnu/4.7/include
/usr/local/include
/usr/lib/gcc/x86_64-linux-gnu/4.7/include-fixed
/usr/include/x86_64-linux-gnu
/usr/include
End of search list.
</pre></div>
</div>
<p>Note that the first two entries happen to be what we are looking for. This
may not be correct on other platforms.</p>
<p>We can now run CMake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">CC</span><span class="o">=</span>clang <span class="nv">CXX</span><span class="o">=</span>clang++ cmake -G <span class="s2">&quot;Unix Makefiles&quot;</span> <span class="se">\</span>
  -DLIBCXX_CXX_ABI<span class="o">=</span>libstdc++ <span class="se">\</span>
  -DLIBCXX_CXX_ABI_INCLUDE_PATHS<span class="o">=</span><span class="s2">&quot;/usr/include/c++/4.7/;/usr/include/c++/4.7/x86_64-linux-gnu/&quot;</span> <span class="se">\</span>
  -DCMAKE_BUILD_TYPE<span class="o">=</span>Release -DCMAKE_INSTALL_PREFIX<span class="o">=</span>/usr <span class="se">\</span>
  &lt;libc++-source-dir&gt;
</pre></div>
</div>
<p>You can also substitute <code class="docutils literal notranslate"><span class="pre">-DLIBCXX_CXX_ABI=libsupc++</span></code>
above, which will cause the library to be linked to libsupc++ instead
of libstdc++, but this is only recommended if you know that you will
never need to link against libstdc++ in the same executable as libc++.
GCC ships libsupc++ separately but only as a static library.  If a
program also needs to link against libstdc++, it will provide its
own copy of libsupc++ and this can lead to subtle problems.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ make cxx
$ make install
</pre></div>
</div>
<p>You can now run clang with -stdlib=libc++.</p>
</div>
<div class="section" id="using-libcxxrt-on-linux">
<span id="libcxxrt-ref"></span><h3><a class="toc-backref" href="#id16">Using libcxxrt on Linux</a><a class="headerlink" href="#using-libcxxrt-on-linux" title="Permalink to this headline">¶</a></h3>
<p>You will need to keep the source tree of <a class="reference external" href="https://github.com/pathscale/libcxxrt/">libcxxrt</a> available
on your build machine and your copy of the libcxxrt shared library must
be placed where your linker will find it.</p>
<p>We can now run CMake like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">CC</span><span class="o">=</span>clang <span class="nv">CXX</span><span class="o">=</span>clang++ cmake -G <span class="s2">&quot;Unix Makefiles&quot;</span> <span class="se">\</span>
        -DLIBCXX_CXX_ABI<span class="o">=</span>libcxxrt <span class="se">\</span>
        -DLIBCXX_CXX_ABI_INCLUDE_PATHS<span class="o">=</span>path/to/libcxxrt-sources/src <span class="se">\</span>
              -DCMAKE_BUILD_TYPE<span class="o">=</span>Release <span class="se">\</span>
              -DCMAKE_INSTALL_PREFIX<span class="o">=</span>/usr <span class="se">\</span>
              &lt;libc++-source-directory&gt;
$ make cxx
$ make install
</pre></div>
</div>
<p>Unfortunately you can’t simply run clang with “-stdlib=libc++” at this point, as
clang is set up to link for libc++ linked to libsupc++.  To get around this
you’ll have to set up your linker yourself (or patch clang).  For example,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ clang++ -stdlib<span class="o">=</span>libc++ helloworld.cpp <span class="se">\</span>
          -nodefaultlibs -lc++ -lcxxrt -lm -lc -lgcc_s -lgcc
</pre></div>
</div>
<p>Alternately, you could just add libcxxrt to your libraries list, which in most
situations will give the same result:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ clang++ -stdlib<span class="o">=</span>libc++ helloworld.cpp -lcxxrt
</pre></div>
</div>
</div>
<div class="section" id="using-a-local-abi-library-installation">
<h3><a class="toc-backref" href="#id17">Using a local ABI library installation</a><a class="headerlink" href="#using-a-local-abi-library-installation" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is not recommended in almost all cases.</p>
</div>
<p>These instructions should only be used when you can’t install your ABI library.</p>
<p>Normally you must link libc++ against a ABI shared library that the
linker can find.  If you want to build and test libc++ against an ABI
library not in the linker’s path you needq to set
<code class="docutils literal notranslate"><span class="pre">-DLIBCXX_CXX_ABI_LIBRARY_PATH=/path/to/abi/lib</span></code> when configuring CMake.</p>
<p>An example build using libc++abi would look like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">CC</span><span class="o">=</span>clang <span class="nv">CXX</span><span class="o">=</span>clang++ cmake <span class="se">\</span>
            -DLIBCXX_CXX_ABI<span class="o">=</span>libc++abi  <span class="se">\</span>
            -DLIBCXX_CXX_ABI_INCLUDE_PATHS<span class="o">=</span><span class="s2">&quot;/path/to/libcxxabi/include&quot;</span> <span class="se">\</span>
            -DLIBCXX_CXX_ABI_LIBRARY_PATH<span class="o">=</span><span class="s2">&quot;/path/to/libcxxabi-build/lib&quot;</span> <span class="se">\</span>
             path/to/libcxx
$ make
</pre></div>
</div>
<p>When testing libc++ LIT will automatically link against the proper ABI
library.</p>
</div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="UsingLibcxx.html">Using libc++</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="TestingLibcxx.html">Testing libc++</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2017, LLVM Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>